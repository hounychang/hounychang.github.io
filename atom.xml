<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Houny'Blog]]></title>
  <subtitle><![CDATA[All in my heart.]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://hounychang.github.io/"/>
  <updated>2015-04-09T05:52:10.048Z</updated>
  <id>http://hounychang.github.io/</id>
  
  <author>
    <name><![CDATA[Houny Chang]]></name>
    <email><![CDATA[hounychang@gmail.com]]></email>
  </author>
  
  <generator uri="http://zespia.tw/hexo/">Hexo</generator>
  
  <entry>
    <title><![CDATA[update package missing system.img]]></title>
    <link href="http://hounychang.github.io/2015/03/10/update-package-missing-system-img/"/>
    <id>http://hounychang.github.io/2015/03/10/update-package-missing-system-img/</id>
    <published>2015-03-10T02:06:13.000Z</published>
    <updated>2015-03-10T02:58:50.000Z</updated>
    <content type="html"><![CDATA[<p>  在这里讲告诉大家怎么手动为Nexus系列手机刷入Google官方Rom，并解决刷5.0或5.1过程中遇到的“update package missing system.img”错误。<br><a id="more"></a></p>
<h2 id="资源">资源</h2>
<ol>
<li><p>SDK<br> 我觉得看到这篇文章的人应该都有SDK，如果没有，请去这个页面<a href="https://developer.android.com/intl/zh-cn/sdk/index.html#Other" target="_blank" rel="external">下载</a>。或者Windows用户直接把这个下载地址复制到下载工具里 <a href="http://dl.google.com/android/installer_r24.0.2-windows.exe" target="_blank" rel="external">http://dl.google.com/android/installer_r24.0.2-windows.exe</a> 下载就可以了。</p>
</li>
<li><p>官方包<br> Google提供了一个网站可以下载官方Rom包，请根据你的手机型号选择。<a href="https://developers.google.com/android/nexus/images" target="_blank" rel="external">https://developers.google.com/android/nexus/images</a></p>
</li>
</ol>
<h2 id="刷机">刷机</h2>
<ol>
<li>使用<code>fastboot</code>确定你把 <code>platform-tools/</code>目录加入<code>PATH</code> </li>
<li>连上手机，打开<code>cmd</code>键入<code>adb reboot bootloader</code>，使手机进入footboot模式</li>
<li>如果你的手机从来没有刷过其他Rom，可能你也没解锁oem锁，键入<code>fastboot oem unlock</code> 来解锁，如果你不确定，输入这个命令就知道你有没有解锁了。</li>
<li>解压你下载的官方Rom，用解压工具打开解压就好，不管是什么拓展名，解压两次，第一次解压xxx.tare.gz 解压出一个没有拓展名的文件，再用压缩工具打开，解压出文件夹。</li>
<li><p>进入文件夹，双击运行<code>flash-all</code></p>
<blockquote>
<p>根据平台选择对应的文件，windows选flash-all.bat</p>
</blockquote>
</li>
<li><p>等待手机开机。</p>
</li>
</ol>
<h2 id="问题">问题</h2>
<h3 id="update_package_missing_system-img_错误">update package missing system.img 错误</h3>
<blockquote>
<p>遇到这个问题大家可以手动刷机，不用那个flash-all脚本<br>具体操作步骤如下</p>
</blockquote>
<h4 id="准备工作：">准备工作：</h4>
<p>解压工厂镜像，确认解压得到的 img 文件（4-6 个不等）放在同一文件夹里。记住路径，稍后会用到。<br>手机关机，进入 fastboot 模式（关机状态下同时按住电源键和音量下键）；注：不同机型进入 fastboot 的方法并不一样，建议在操作前先检索。<br>连接电脑，打开命令行，进入刚才解压镜像、放置 img 文件的目录。</p>
<blockquote>
<p>注：以下所有操作均在命令行操作，请复制文中用淡红色标注的命令。一些命令在复制时需要根据解压后得到文件的名称进行修改，请留意教程中的说明。</p>
</blockquote>
<h4 id="具体步骤：">具体步骤：</h4>
<ol>
<li><p>刷入 Bootloader &amp; Radio<br> 打开命令行，进入解压工厂镜像的目录（如果解压工厂镜像的目录在 C:\android，则在命令行中输入「pushd C:\android」），依次输入以下命令：<br> <code>fastboot flash bootloader &lt;bootloader文件名&gt;.img</code></p>
<blockquote>
<p>注：由于每种设备的 bootloader 和 radio 文件名都不同，在操作时请将文件名换为对应的文件名。</p>
</blockquote>
<p> 如果你的设备是手机或支持移动网络的平板设备，你还需要刷入 radio：</p>
<p> <code>fastboot flash radio &lt;radio文件名&gt;.img</code></p>
</li>
<li><p>重启设备至 Bootloader<br> <code>fastboot reboot-bootloader</code></p>
</li>
<li><p>依次刷入其他镜像文件<br> 重启完毕后，请依次刷入 recovery、boot、system 镜像文件<br> <code>fastboot flash recovery recovery.img</code><br> <code>fastboot flash boot boot.img</code><br> <code>fastboot flash system system.img</code></p>
<blockquote>
<p>Nexus 9 用户在完成以上几步后，还需要刷入 vendor.img，命令如下：<br>fastboot flash vendor vendor.img</p>
</blockquote>
</li>
<li><p>清除用户数据<br> <code>fastboot flash cache cache.img</code><br> <code>fastboot flash userdata userdata.img</code></p>
</li>
<li><p>再次重启<br> <code>fastboot reboot</code></p>
</li>
</ol>
<blockquote>
<p>解决问题的方法来自 <a href="http://sspai.com/" target="_blank" rel="external">少数派</a> <a href="http://sspai.com/27429" target="_blank" rel="external">原文链接</a> 作者<a href="http://sspai.com/user/139" target="_blank" rel="external">iF2007</a></p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<p>  在这里讲告诉大家怎么手动为Nexus系列手机刷入Google官方Rom，并解决刷5.0或5.1过程中遇到的“update package missing system.img”错误。<br>]]>
    
    </summary>
    
      <category term="Nexus" scheme="http://hounychang.github.io/tags/Nexus/"/>
    
      <category term="Google" scheme="http://hounychang.github.io/tags/Google/"/>
    
      <category term="Me" scheme="http://hounychang.github.io/categories/Me/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Android图片处理事项]]></title>
    <link href="http://hounychang.github.io/2015/03/04/Android%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%86%E4%BA%8B%E9%A1%B9/"/>
    <id>http://hounychang.github.io/2015/03/04/Android图片处理事项/</id>
    <published>2015-03-04T09:14:50.000Z</published>
    <updated>2015-03-04T09:19:08.000Z</updated>
    <content type="html"><![CDATA[<p>  这里介绍在Android开发过程中对于图片处理的一些注意事项，并提供一个在用的的图片压缩<br><a id="more"></a></p>
<h1 id="Android图片处理注意事项">Android图片处理注意事项</h1>
<p>@(Android)[Image|图片处理|Reduce]</p>
<h3 id="如果只是为了读取图片的宽高属性，要生成一个只有宽高属性的Bitmap">如果只是为了读取图片的宽高属性，要生成一个只有宽高属性的Bitmap</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">BitmapFactory.Options <span class="variable">newOpts =</span> new BitmapFactory.Options();</div><div class="line">      //开始读入图片，只读属性，不全部读入内存，此时把options.inJustDecodeBounds 设回<span class="constant">true</span>了</div><div class="line">      newOpts.<span class="variable">inJustDecodeBounds =</span> <span class="constant">true</span>;</div><div class="line">      //inPurgeable 设为True的话表示使用BitmapFactory创建的Bitmap用于存储Pixel的内存空间在系统内存不足时可以被回收</div><div class="line">      newOpts.<span class="variable">inPurgeable =</span> <span class="constant">true</span>;</div><div class="line">      //inInputShareable与inPurgeable一起使用，如果inPurgeable为<span class="constant">false</span>那该设置将被忽略，如果为<span class="constant">true</span>，那么它可以决定位图是否能够共享一个指向数据源的引用，或者是进行一份拷贝</div><div class="line">      newOpts.<span class="variable">inInputShareable =</span> <span class="constant">true</span>;</div><div class="line">      Bitmap <span class="variable">bitmap =</span> BitmapFactory.decodeFile(srcPath, newOpts);//此时返回bm为空</div><div class="line"></div><div class="line">      int <span class="variable">w =</span> newOpts.outWidth;</div><div class="line">      int <span class="variable">h =</span> newOpts.outHeight;</div></pre></td></tr></table></figure>

<hr>
<h3 id="三星手机拍照的图片都是横向的">三星手机拍照的图片都是横向的</h3>
<p>三星手机拍照后图片会有<code>Exif</code>头信息，并且有旋转角度，拍出来的图片都是横屏的，如果想要使用这些图片，需要根据Exif头信息去判断旋转角度，再把图片正过来。<br>因为这个是三星的硬件写入的，所以你如果自定义拍照，只修改<code>Camera.Parameters.setRotation(int)</code>旋转角度是无效的。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">readImageExif</span>(String filePtah) {</div><div class="line">       <span class="keyword">int</span> orientation = -<span class="number">2</span>;</div><div class="line">       <span class="keyword">int</span> res = <span class="number">0</span>;</div><div class="line">       <span class="keyword">try</span> {</div><div class="line">           ExifInterface exif = <span class="keyword">new</span> ExifInterface();</div><div class="line">           exif.readExif(filePtah);</div><div class="line">           orientation = exif.getTagIntValue(ExifInterface.TAG_ORIENTATION);</div><div class="line">           Log.e(<span class="string">"Exif"</span>, <span class="string">"Orientation: "</span> + orientation);</div><div class="line">           <span class="comment">//根据图片头部信息判断需要旋转的角度，</span></div><div class="line">           <span class="comment">//在三星的手机里，会自动在Exif头信息里写入旋转角度，拍照时设置ratation是无效的</span></div><div class="line">           <span class="keyword">switch</span> (orientation) {</div><div class="line">               <span class="keyword">case</span> <span class="number">3</span>:</div><div class="line">                   res = <span class="number">180</span>;</div><div class="line">                   <span class="keyword">break</span>;</div><div class="line">               <span class="keyword">case</span> <span class="number">6</span>:</div><div class="line">                   res = <span class="number">90</span>;</div><div class="line">                   <span class="keyword">break</span>;</div><div class="line">               <span class="keyword">case</span> <span class="number">8</span>:</div><div class="line">                   res = <span class="number">270</span>;</div><div class="line">                   <span class="keyword">break</span>;</div><div class="line"></div><div class="line">           }</div><div class="line">       } <span class="keyword">catch</span> (Exception e) {</div><div class="line">           Log.e(<span class="string">"Exif"</span>, <span class="string">"No Exif info"</span>);</div><div class="line">       }</div><div class="line">       <span class="keyword">return</span> res;</div><div class="line">   }</div></pre></td></tr></table></figure>

<hr>
<h3 id="图片压缩">图片压缩</h3>
<p>图片压缩一定要注意<code>主动回收</code>bitmap</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="literal">null</span> != bm && !bm.isRecycled()) {</div><div class="line">              bm.recycle();</div><div class="line">              System.gc();</div><div class="line">          }</div></pre></td></tr></table></figure>

<h5 id="图片压缩代码">图片压缩代码</h5>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="javadoc">/**</span></div><div class="line">   * 压缩到1080宽或高</div><div class="line">   *</div><div class="line">   *<span class="javadoctag"> @param</span> srcPath</div><div class="line">   *<span class="javadoctag"> @return</span></div><div class="line">   */</div><div class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Bitmap <span class="title">getimage</span>(String srcPath) {</div><div class="line">      BitmapFactory.Options newOpts = <span class="keyword">new</span> BitmapFactory.Options();</div><div class="line">      <span class="comment">//开始读入图片，只读属性，不全部读入内存，此时把options.inJustDecodeBounds 设回true了</span></div><div class="line">      newOpts.inJustDecodeBounds = <span class="keyword">true</span>;</div><div class="line">      <span class="comment">//inPurgeable 设为True的话表示使用BitmapFactory创建的Bitmap用于存储Pixel的内存空间在系统内存不足时可以被回收</span></div><div class="line">      newOpts.inPurgeable = <span class="keyword">true</span>;</div><div class="line">      <span class="comment">//inInputShareable与inPurgeable一起使用，如果inPurgeable为false那该设置将被忽略，如果为true，那么它可以决定位图是否能够共享一个指向数据源的引用，或者是进行一份拷贝</span></div><div class="line">      newOpts.inInputShareable = <span class="keyword">true</span>;</div><div class="line">      Bitmap bitmap = BitmapFactory.decodeFile(srcPath, newOpts);<span class="comment">//此时返回bm为空</span></div><div class="line"></div><div class="line">      <span class="keyword">int</span> w = newOpts.outWidth;</div><div class="line">      <span class="keyword">int</span> h = newOpts.outHeight;</div><div class="line">      <span class="comment">//设置要压缩的图片的宽高限制</span></div><div class="line">      <span class="keyword">int</span> hh = IMAGE_MAX_SIZE;<span class="comment">//这里设置高度为800f</span></div><div class="line">      <span class="keyword">int</span> ww = IMAGE_MAX_SIZE;<span class="comment">//这里设置宽度为480f</span></div><div class="line">      <span class="comment">//缩放比。由于是固定比例缩放，只用高或者宽其中一个数据进行计算即可</span></div><div class="line">      <span class="keyword">int</span> be = <span class="number">1</span>;<span class="comment">//be=1表示不缩放</span></div><div class="line">      <span class="keyword">if</span> (w &gt; h && w &gt; IMAGE_MAX_SIZE) {<span class="comment">//如果宽度大的话根据宽度固定大小缩放</span></div><div class="line">          be = (newOpts.outWidth / ww);</div><div class="line">      } <span class="keyword">else</span> <span class="keyword">if</span> (w &lt; h && h &gt; hh) {<span class="comment">//如果高度高的话根据宽度固定大小缩放</span></div><div class="line">          be = (newOpts.outHeight / hh);</div><div class="line">      }</div><div class="line">      <span class="keyword">if</span> (be &lt;= <span class="number">0</span>)</div><div class="line">          be = <span class="number">1</span>;</div><div class="line">      <span class="comment">//因为三星手机拍照后回自动在图片的Exif信息中写入旋转角度</span></div><div class="line">      <span class="comment">//虽然在手机里看到是正向的，但其实是横向的</span></div><div class="line">      <span class="comment">//根据Exif信息判断旋转方向，如果需要旋转，则重新旋转生成一张图片</span></div><div class="line">      <span class="keyword">int</span> rat = readImageExif(srcPath);</div><div class="line">      <span class="keyword">if</span> (rat == <span class="number">0</span>) {</div><div class="line">          BitmapFactory.Options newOpts2 = <span class="keyword">new</span> BitmapFactory.Options();</div><div class="line">          <span class="comment">//重新读入图片，注意此时已经把options.inJustDecodeBounds 设回false了</span></div><div class="line">          newOpts2.inJustDecodeBounds = <span class="keyword">false</span>;</div><div class="line">          newOpts2.inPurgeable = <span class="keyword">true</span>;</div><div class="line">          newOpts2.inInputShareable = <span class="keyword">true</span>;</div><div class="line">          newOpts2.inSampleSize = be;<span class="comment">//设置缩放比例</span></div><div class="line">          bitmap = BitmapFactory.decodeFile(srcPath, newOpts2);</div><div class="line">      }<span class="keyword">else</span>{</div><div class="line">          BitmapFactory.Options newOpts2 = <span class="keyword">new</span> BitmapFactory.Options();</div><div class="line">          newOpts2.inJustDecodeBounds = <span class="keyword">false</span>;</div><div class="line">          newOpts2.inPurgeable = <span class="keyword">true</span>;</div><div class="line">          newOpts2.inInputShareable = <span class="keyword">true</span>;</div><div class="line">          newOpts2.inSampleSize = be;<span class="comment">//设置缩放比例</span></div><div class="line">          bitmap = BitmapFactory.decodeFile(srcPath, newOpts2);</div><div class="line">          <span class="comment">//根据Exif信息判断旋转方向，如果需要旋转，则重新旋转生成一张图片</span></div><div class="line">          Matrix m=<span class="keyword">new</span> Matrix();</div><div class="line">          m.postRotate(rat);</div><div class="line">          <span class="comment">//这里的源bitmap要用压缩好的</span></div><div class="line">          bitmap = Bitmap.createBitmap(bitmap,<span class="number">0</span>,<span class="number">0</span>,bitmap.getWidth(),bitmap.getHeight(),m,<span class="keyword">false</span>);</div><div class="line">      }</div><div class="line">      <span class="keyword">return</span> bitmap;</div><div class="line">  }</div></pre></td></tr></table></figure>

<h5 id="保存压缩图片代码">保存压缩图片代码</h5>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="javadoc">/**</span></div><div class="line">    * 保存方法</div><div class="line">    */</div><div class="line">   <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">saveCompressedImage</span>(String srcPath) <span class="keyword">throws</span> IOException {</div><div class="line"></div><div class="line">       Bitmap bm = getimage(srcPath);</div><div class="line">       String filePath = PHOTO_TEMP_DIR;</div><div class="line">       File dir = <span class="keyword">new</span> File(filePath);</div><div class="line">       <span class="keyword">if</span> (!dir.exists()) {</div><div class="line">           dir.mkdirs();</div><div class="line">       }</div><div class="line">       String fileName = getTempPhotoFilename();</div><div class="line"></div><div class="line">       File f = <span class="keyword">new</span> File(filePath, fileName);</div><div class="line"></div><div class="line">       <span class="keyword">if</span> (f.exists()) {</div><div class="line">           f.delete();</div><div class="line">       }</div><div class="line">       FileOutputStream out = <span class="keyword">null</span>;</div><div class="line">       <span class="keyword">try</span> {</div><div class="line">           out = <span class="keyword">new</span> FileOutputStream(f);</div><div class="line">           bm.compress(Bitmap.CompressFormat.JPEG, <span class="number">85</span>, out);</div><div class="line"></div><div class="line">           <span class="keyword">return</span> filePath + File.separator + fileName;</div><div class="line">       } <span class="keyword">catch</span> (FileNotFoundException e) {</div><div class="line">           e.printStackTrace();</div><div class="line">       } <span class="keyword">catch</span> (IOException e) {</div><div class="line">           e.printStackTrace();</div><div class="line">       } <span class="keyword">finally</span> {</div><div class="line">           <span class="comment">//回收Bitmap</span></div><div class="line">           <span class="keyword">if</span> (<span class="keyword">null</span> != bm && !bm.isRecycled()) {</div><div class="line">               bm.recycle();</div><div class="line">               System.gc();</div><div class="line">           }</div><div class="line">           <span class="keyword">try</span> {</div><div class="line">               out.flush();</div><div class="line">               out.close();</div><div class="line">           } <span class="keyword">catch</span> (IOException e) {</div><div class="line">               e.printStackTrace();</div><div class="line">           }</div><div class="line">       }</div><div class="line">       <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">   }</div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<p>  这里介绍在Android开发过程中对于图片处理的一些注意事项，并提供一个在用的的图片压缩<br>]]>
    
    </summary>
    
      <category term="Image" scheme="http://hounychang.github.io/tags/Image/"/>
    
      <category term="图片处理" scheme="http://hounychang.github.io/tags/%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%86/"/>
    
      <category term="Android" scheme="http://hounychang.github.io/categories/Android/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Unable to add window]]></title>
    <link href="http://hounychang.github.io/2015/02/28/Unable-to-add-window/"/>
    <id>http://hounychang.github.io/2015/02/28/Unable-to-add-window/</id>
    <published>2015-02-28T04:13:14.000Z</published>
    <updated>2015-02-28T04:23:41.000Z</updated>
    <content type="html"><![CDATA[<p>  Unable to add window — token android.os.BinderProxy is not valid; is your activity running? 错误分析和解决办法<br><a id="more"></a></p>
<h2 id="错误原因">错误原因</h2>
<p><code>Unable to add window — token android.os.BinderProxy is not valid; is your activity running?</code> 就是在你使用Dialog的时候设置的context对象发生了改变，比如说当你的Activity消失了而你的后台异步任务还要显示这个Activity里的Dialog，就会出现这个Bug。</p>
<h2 id="解决办法">解决办法</h2>
<ol>
<li><p>保证你的Dialog显示的时候Activity是Runing的。</p>
<blockquote>
<p>我遇到这个问题就是我在上图片的时候，不小心忘记设置上传过程中要一直显示对话框，不让用户返回。这就造成了用户在上传多张图片的过程中可以返回，退出当前Activity，而这时候如果上传有失败的图片，我还想要显示一个Dialog提示上传失败，就出现了这个Error。</p>
</blockquote>
</li>
<li><p>显示Dialog之前判断Activity的状态</p>
</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(!((Activity) context).isFinishing())</div><div class="line">{</div><div class="line">    <span class="comment">//show dialog</span></div><div class="line">}</div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<p>  Unable to add window — token android.os.BinderProxy is not valid; is your activity running? 错误分析和解决办法<br>]]>
    
    </summary>
    
      <category term="Android" scheme="http://hounychang.github.io/tags/Android/"/>
    
      <category term="Error" scheme="http://hounychang.github.io/tags/Error/"/>
    
      <category term="Dialog" scheme="http://hounychang.github.io/tags/Dialog/"/>
    
      <category term="Android" scheme="http://hounychang.github.io/categories/Android/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Ubuntu 14 安装Openfire]]></title>
    <link href="http://hounychang.github.io/2015/01/21/Ubuntu-14-%E5%AE%89%E8%A3%85Openfire/"/>
    <id>http://hounychang.github.io/2015/01/21/Ubuntu-14-安装Openfire/</id>
    <published>2015-01-21T07:17:43.000Z</published>
    <updated>2015-01-21T07:22:43.000Z</updated>
    <content type="html"><![CDATA[<p>这里介绍怎么在Ubuntu上安装配置Openfire，包括 JDK安装、MySql安装，全套的。<br><a id="more"></a></p>
<h2 id="环境配置">环境配置</h2>
<h3 id="JAVA_环境">JAVA 环境</h3>
<ol>
<li>先用<code>java -version</code> 测试看看是不是已经安装了java了，安装了就跳过，没安装继续。</li>
<li>下载 <code>jdk</code>。因为ubuntu默认是不认rpm，需要下载<code>.tar.gz</code>的压缩包形式的文件进行安装</li>
<li>到 <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="external">Oracle JDK 官网</a>下载对应版本的jdk</li>
<li>如果你用的是vps或者其他类型的远程主机，通过xftp传过去。如果不是，跳过这一步</li>
<li><p>解压 tar.gz 文件 命令是<code>tar zxvf FileName.tar.gz</code></p>
<blockquote>
<p>把 FileName.tar.gz 替换成你的文件名</p>
</blockquote>
</li>
<li><p>拷贝到<code>/usr/lib/java</code> 目录下。<code>sudo mv /yourPath/jdk1.8.0_25 /usr/lib/java/</code></p>
<blockquote>
<p>记得先去 <code>/usr/lib</code>下创建 <code>java</code>文件夹<br>下文中遇到 <code>jdk1.8.0_25</code> 这个路径是因为我 解压后就是这个文件名，我没有改，就以这个为例吧。</p>
</blockquote>
</li>
<li>切换到 /etc/profile.d/路径下 <code>cd /etc/profile.d/</code></li>
<li>新建 <code>oraclejdk.sh</code>文件 <code>sudo vim oraclejdk.sh</code></li>
<li>先写入下面代码，再执行 oraclejdk.sh <code>source /etc/profile.d/oraclejdk.sh</code></li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">export <span class="constant">J2SDKDIR</span>=<span class="regexp">/usr/lib</span><span class="regexp">/java/jdk</span>1.<span class="number">8.0_25</span></div><div class="line">export <span class="constant">J2REDIR</span>=<span class="regexp">/usr/lib</span><span class="regexp">/java/jdk</span>1.<span class="number">8.0_25</span>/jre</div><div class="line">export <span class="constant">PATH</span>=<span class="variable">$PATH</span><span class="symbol">:/usr/lib/java/jdk1</span>.<span class="number">8.0_25</span>/<span class="symbol">bin:</span>/usr/lib/java/jdk1.<span class="number">8.0_25</span>/db/<span class="symbol">bin:</span>/usr/lib/java/jdk1.<span class="number">8.0_25</span>/jre/bin</div><div class="line">export <span class="constant">JAVA_HOME</span>=<span class="regexp">/usr/lib</span><span class="regexp">/java/jdk</span>1.<span class="number">8.0_25</span></div><div class="line">export <span class="constant">DERBY_HOME</span>=<span class="regexp">/usr/lib</span><span class="regexp">/java/jdk</span>1.<span class="number">8.0_25</span>/db</div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<p>这里介绍怎么在Ubuntu上安装配置Openfire，包括 JDK安装、MySql安装，全套的。<br>]]>
    
    </summary>
    
      <category term="Ubuntu JDK Openfire" scheme="http://hounychang.github.io/tags/Ubuntu-JDK-Openfire/"/>
    
      <category term="IM" scheme="http://hounychang.github.io/categories/IM/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[NDK初试]]></title>
    <link href="http://hounychang.github.io/2015/01/12/NDK%E5%88%9D%E8%AF%95/"/>
    <id>http://hounychang.github.io/2015/01/12/NDK初试/</id>
    <published>2015-01-12T09:32:22.000Z</published>
    <updated>2015-01-14T02:31:40.000Z</updated>
    <content type="html"><![CDATA[<p>初步使用NDK，这篇文章里从环境搭建，到运行helloWorld。没有更深的内容，只适合从来没有玩过NDK的同学看。<br><a id="more"></a></p>
<h2 id="环境搭建">环境搭建</h2>
<blockquote>
<p>从NDKr8开始NDK中内置了Windows环境下的ndk-build，不需要再安装cygwin这个玩意了。值得庆幸…</p>
</blockquote>
<ol>
<li>CDT插件安装<ul>
<li>到<a href="https://eclipse.org/cdt/downloads.php" target="_blank" rel="external">CDT官网</a>获取插件下载地址</li>
<li>Eclipse中 <code>Help-Install New Software-Add</code></li>
<li>添加下载地址</li>
<li>选择<code>CDT Main Features</code>分组下的<code>C/C++ Development Tools</code>和<code>C/C++ Development Tools SDK</code>两个插件，其他的不需要安装。</li>
</ul>
</li>
<li>NDK安装<ul>
<li>科学上网进入 <a href="http://developer.android.com/tools/sdk/ndk/index.html" target="_blank" rel="external">NDK下载官网</a></li>
<li>下载正确版本并双击自动解压</li>
<li>把解压后或者你拷贝后的路径添加到环境变量</li>
<li>例如我的路径是<code>E:\AndroidNDK</code></li>
<li>在cmd里测试 <code>ndk-build</code></li>
<li>测试不成功说明你的环境变量没加对</li>
</ul>
</li>
</ol>
<h2 id="建议">建议</h2>
<ol>
<li>复习C/C++</li>
<li>先看NDK里的docs</li>
<li>再看NDK里的samples</li>
</ol>
<h2 id="Hello_World">Hello World</h2>
<ol>
<li>创建普通Android项目<blockquote>
<p>注意一定<strong><em>不要</em></strong>创建带有下划线的项目</p>
</blockquote>
</li>
<li>新建C文件</li>
</ol>
<h2 id="小技巧">小技巧</h2>
<ul>
<li>准确创建c文件方法名<blockquote>
<p>创建Activity的时候先不要继承Activity，先像下面那样写<br>把native方法写出来之后，cmd切换至 bin/class目录，执行<br><code>javah com.houny.helloworld.TestJNI</code><br>这个命令会在class根据了帮你生成一个.h头文件，方法名也在里面了。<br>如果你在TestJNI.java里使用了中文，请使用<br><code>javah -encoding utf-8 com.houny.helloworld.TestJNI</code></p>
</blockquote>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.houny.helloworld;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJNI</span> </span>{</div><div class="line">	<span class="keyword">public</span> <span class="keyword">native</span> String <span class="title">testJNI</span>();</div><div class="line">}</div></pre></td></tr></table></figure>

<ul>
<li>使用LOG<blockquote>
<p>c文件里其实也是可以像普通java代码一样使用android提供的log的。使用方法如下,不过log内容只能是英文的。</p>
</blockquote>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">#<span class="keyword">include</span>&lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span>&lt;jni.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span>"com_example_ndk_MainActivity.h"</span></div><div class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;android/log.h&gt;</span></div><div class="line"><span class="preprocessor">#<span class="keyword">define</span> LOG_TAG "System.out.c"</span></div><div class="line"><span class="preprocessor">#<span class="keyword">define</span> LOGD(...) __android_log_print(ANDROID_LOG_DEBUG, LOG_TAG, __VA_ARGS__)</span></div><div class="line"><span class="preprocessor">#<span class="keyword">define</span> LOGI(...) __android_log_print(ANDROID_LOG_INFO, LOG_TAG, __VA_ARGS__)</span></div><div class="line"></div><div class="line">JNIEXPORT jstring JNICALL Java_com_example_ndk_MainActivity_javaFromJNI(</div><div class="line">		JNIEnv* env, jobject obj) {</div><div class="line">	<span class="keyword">return</span> (*env)-&gt;NewStringUTF(env, <span class="string">"hello jni!"</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/*</span></div><div class="line"> * Class:     com_example_ndk_MainActivity</div><div class="line"> * Method:    java_From_JNI</div><div class="line"> * Signature: ()Ljava/lang/String;</div><div class="line"> */</div><div class="line">JNIEXPORT jstring JNICALL Java_com_example_ndk_MainActivity_java_1From_1JNI(</div><div class="line">		JNIEnv* env, jobject obj) {</div><div class="line"></div><div class="line">	LOGI(<span class="string">"function called"</span>);</div><div class="line">	LOGI(<span class="string">"array init"</span>);</div><div class="line">	<span class="keyword">char</span> c1[<span class="number">3</span>] = { <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span> };</div><div class="line">	<span class="keyword">char</span> c2[<span class="number">2</span>] = { <span class="string">'d'</span>, <span class="string">'e'</span> };</div><div class="line">	LOGI(<span class="string">"array init finish"</span>);</div><div class="line">	LOGI(<span class="string">"copy array"</span>);</div><div class="line">	<span class="built_in">strcat</span>(c1, c2); <span class="comment">//把c2的内容放在c1的后面，要求c1长度&gt;c2长度</span></div><div class="line">	LOGI(<span class="string">"copy array finish"</span>);</div><div class="line"></div><div class="line">	<span class="keyword">return</span> (*env)-&gt;NewStringUTF(env, <span class="string">"hello_jni__"</span>);</div><div class="line">}</div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<p>初步使用NDK，这篇文章里从环境搭建，到运行helloWorld。没有更深的内容，只适合从来没有玩过NDK的同学看。<br>]]>
    
    </summary>
    
      <category term="NDK JNI" scheme="http://hounychang.github.io/tags/NDK-JNI/"/>
    
      <category term="NDK" scheme="http://hounychang.github.io/categories/NDK/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Android使用相机]]></title>
    <link href="http://hounychang.github.io/2015/01/06/Android%E4%BD%BF%E7%94%A8%E7%9B%B8%E6%9C%BA/"/>
    <id>http://hounychang.github.io/2015/01/06/Android使用相机/</id>
    <published>2015-01-06T07:36:02.000Z</published>
    <updated>2015-01-06T07:43:56.000Z</updated>
    <content type="html"><![CDATA[<p>  这里介绍在Android相机相关开发中可能遇到的一些问题，和完整代码分享<br><a id="more"></a></p>
<ol>
<li>设置预览和保存图像的方向</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//STEP #1: Get rotation degrees</span></div><div class="line">Camera.CameraInfo info = new Camera.CameraInfo();</div><div class="line">Camera.getCameraInfo(Camera.CameraInfo.CAMERA_FACING_BACK, info);</div><div class="line"><span class="keyword">int</span> rotation = context.getWindowManager().getDefaultDisplay().getRotation();</div><div class="line"><span class="keyword">int</span> <span class="built_in">degrees</span> = <span class="number">0</span>;</div><div class="line"><span class="keyword">switch</span> (rotation) {</div><div class="line">    <span class="keyword">case</span> Surface.ROTATION_0: <span class="built_in">degrees</span> = <span class="number">0</span>; <span class="keyword">break</span>; <span class="comment">//Natural orientation</span></div><div class="line">        <span class="keyword">case</span> Surface.ROTATION_90: <span class="built_in">degrees</span> = <span class="number">90</span>; <span class="keyword">break</span>; <span class="comment">//Landscape left</span></div><div class="line">        <span class="keyword">case</span> Surface.ROTATION_180: <span class="built_in">degrees</span> = <span class="number">180</span>; <span class="keyword">break</span>;<span class="comment">//Upside down</span></div><div class="line">        <span class="keyword">case</span> Surface.ROTATION_270: <span class="built_in">degrees</span> = <span class="number">270</span>; <span class="keyword">break</span>;<span class="comment">//Landscape right</span></div><div class="line">    }</div><div class="line"><span class="keyword">int</span> rotate = (info.orientation - <span class="built_in">degrees</span> + <span class="number">360</span>) % <span class="number">360</span>;</div><div class="line">	</div><div class="line"><span class="comment">//STEP #2: Set the 'rotation' parameter</span></div><div class="line">Camera.Parameters params = camera.getParameters();</div><div class="line">params.setRotation(rotate); <span class="comment">//保存时的图像竖着</span></div><div class="line">camera.setDisplayOrientation(rotate);<span class="comment">//预览图像竖着</span></div><div class="line">camera.setParameters(params);</div></pre></td></tr></table></figure>

]]></content>
    <summary type="html">
    <![CDATA[<p>  这里介绍在Android相机相关开发中可能遇到的一些问题，和完整代码分享<br>]]>
    
    </summary>
    
      <category term="Android" scheme="http://hounychang.github.io/tags/Android/"/>
    
      <category term="Camera" scheme="http://hounychang.github.io/tags/Camera/"/>
    
      <category term="Android" scheme="http://hounychang.github.io/categories/Android/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Linux 服务器配置]]></title>
    <link href="http://hounychang.github.io/2014/09/25/Config-Linux-Java-and-MySQL/"/>
    <id>http://hounychang.github.io/2014/09/25/Config-Linux-Java-and-MySQL/</id>
    <published>2014-09-25T03:48:56.000Z</published>
    <updated>2014-09-25T04:01:33.000Z</updated>
    <content type="html"><![CDATA[<p>  这里介绍在Linux服务器上配置JDK,MySQL。以后再Linux上用的其他配置也会更新在这里。<br><a id="more"></a></p>
<h3 id="JDK">JDK</h3>
<ol>
<li>下载JDK</li>
<li><code>rpm -ivh jdk-7u25-linux-x64.rpm</code></li>
<li>编辑环境变量 <code>gedit /etc/profile</code><br>添加下面的值<blockquote>
<p>export JAVA_HOME=/usr/java/jdk-1.7.0.25<br>export CLASSPATH=.:\$JAVA_HOME/lib:\$JAVA_HOME/lib/rt.jar<br>export PATH=\$PATH:\$JAVA_HOME/bin:\$JAVA_HOME/jre/bin</p>
</blockquote>
</li>
<li>重新载入配置<code>source /etc/profile</code></li>
</ol>
<hr>
<h3 id="MySQL">MySQL</h3>
<ol>
<li><p>先卸载已安装的MySQL</p>
<ul>
<li><p>先把系统里安装的所有mysql找出来<br><code>#rpm -qa | grep -i mysql</code><br>运行此命令后，显示所有列表：</p>
<blockquote>
<p>mysqlclient10-3.23.58-4.RHEL4.1<br>mysqlclient10-devel-3.23.58-4.RHEL4.1</p>
</blockquote>
</li>
<li><p>将列表一一强制删除：<br><code>#rpm -ev --nodeps mysqlclient10-3.23.58-4.RHEL4.1</code><br><code>#rpm -ev --nodeps mysqlclient10-devel-3.23.58-4.RHEL4.1</code></p>
</li>
<li><p>将老版本的几个文件手工删除：<br><code>#rpm -f /etc/my.cnf</code><br><code>#rpm -rf /usr/var/lib/mysql</code></p>
<blockquote>
<p>如果报错可以用cat命令看看有没有</p>
</blockquote>
</li>
<li><p><code>cd</code> 到<code>usr</code>目录下<code>rm</code><strong>所有与mysql相关文件</strong></p>
</li>
</ul>
</li>
<li><p>安装 Server和Client</p>
<ul>
<li>安装<strong>Server</strong><br><code>#rpm -ivh MySQL-server-community-5.0.45-0.rhel4.i386.rpm</code></li>
<li>安装<strong>Client</strong>，<em>用于命令行下操作mysql</em>：<br><code>#rpm -ivh MySQL-client-community-5.0.45-0.rhel4.i386.rpm</code></li>
</ul>
</li>
<li><p>配置防火墙允许<strong>3306</strong>端口通过</p>
<ul>
<li>打开防火墙配置文件<br><code>vi /etc/sysconfig/iptables</code></li>
<li>添加3306<br><code>-A RH-Firewall-1-INPUT -m state –state NEW -m tcp -p tcp –dport 3306 -j ACCEPT</code></li>
<li>重启防火墙<br><code>service iptables restart</code></li>
</ul>
</li>
<li><p>修改<strong>hosts</strong>文件</p>
<ul>
<li>打开hosts文件<br><code>vi /etc/hosts</code></li>
<li>修改localhost<br><code>127.0.0.1 localhost</code></li>
</ul>
</li>
<li><p>修改<strong>MySQL密码</strong></p>
<ul>
<li><strong>停用</strong>mysql服务：<br>  <code>/etc/rc.d/init.d/mysqld stop</code></li>
<li>输入命令：<br>  <code># mysqld_safe --user=mysql --skip-grant-tables --skip-networking &amp;</code> </li>
<li>登入数据库：<br><code># mysql -u root mysql</code></li>
<li><p>进入MySQL数据库<br><code>mysql&gt; use mysql;</code></p>
<blockquote>
<p><em>返回：</em><br>Database changed </p>
</blockquote>
</li>
<li><p>修改密码<br>  <code>mysql&gt; UPDATE user SET Password=PASSWORD(&#39;root&#39;)where USER=&#39;root&#39;;</code></p>
<blockquote>
<p><em>返回：</em><br>Query OK, 3 rows affected (0.00 sec)<br>Rows matched: 3  Changed: 3  Warnings: 0</p>
</blockquote>
</li>
<li><p>刷新<br>  <code>mysql&gt;FLUSH PRIVILEGES;</code> </p>
<blockquote>
<p><em>返回：</em><br>Query OK, 0 rows affected (0.00 sec) </p>
</blockquote>
</li>
<li><p>退出<br>  <code>mysql&gt; quit</code> </p>
</li>
<li>重新启动MySQL<br><code># /sbin/service mysql restart</code></li>
</ul>
</li>
<li><p>新增MySQL用户</p>
<ul>
<li><p>登陆<br><code># mysql -u toot –p</code></p>
<blockquote>
<p>Enter password:<code>root</code><br>mysql&gt;<em>&lt;登录成功&gt;</em></p>
</blockquote>
</li>
<li><p>再次设置密码才可以新增用户</p>
<blockquote>
<p>mysql><code>UPDATE user SET Password=PASSWORD(&#39;root&#39;) where USER=&#39;root&#39;;</code></p>
</blockquote>
</li>
<li><p>刷新</p>
<blockquote>
<p>mysql> <code>FLUSH PRIVILEGES;</code></p>
</blockquote>
</li>
<li><p>退出<br><code>mysql&gt; quit</code></p>
</li>
<li><p>新增本地用户</p>
</li>
<li>新增用于IP登陆的用户</li>
</ul>
</li>
<li><p>新建<strong>/etc/my.cnf</strong></p>
<ul>
<li>如果<strong><em>/usr/share/mysql</em></strong>目录下有<strong><em>.cnf</em></strong>文件则拷贝到<strong><em>etc</em></strong>下并改名为<code>my.cnf</code></li>
<li><p>没有则新建一个</p>
<blockquote>
<p># The MySQL server<br>  [mysqld]<br>  port            = 3306<br>  socket          = /var/lib/mysql/mysql.sock<br>  skip-external-locking<br>  key_buffer_size = 16M<br>  max_allowed_packet = 1M<br>  table_open_cache = 64<br>  sort_buffer_size = 512K<br>  net_buffer_length = 8K<br>  read_buffer_size = 256K<br>  read_rnd_buffer_size = 512K<br>  myisam_sort_buffer_size = 8M<br>  #add here</p>
</blockquote>
</li>
<li><p>新增一句使MySQL不区分大小写</p>
<blockquote>
<p>lower_case_table_names=1</p>
</blockquote>
</li>
</ul>
</li>
<li><p>导入表</p>
<ul>
<li>新建用户<br><code>mysql -uroot -p[root的密码]</code></li>
<li>新建用户及授权 (用户名：<strong><em>smart</em></strong>，密码：<strong><em>smart</em></strong>)<br><code>create user smart@&#39;%&#39; identified by &#39;smart&#39;;</code><br><code>create user smart@localhost identified by &#39;smart&#39;;</code><br><code>grant all on *.* to smart;</code></li>
<li>创建数据库<br><code>create database smart;</code></li>
<li>退出<br><code>exit;</code></li>
</ul>
</li>
<li>导入数据库<br> <code>mysql -usmart -psmart;</code><br> <code>use smart</code><br> <code>source 数据库文件.dmp的地址;</code></li>
<li>导出数据库（以后做数据移动时，将数据导出时使用）<br><code>mysqldump -usmart -psmart -h服务器地址 smart --default-character-set=utf8  --hex-blob &gt;数据库导出文件地址</code></li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<p>  这里介绍在Linux服务器上配置JDK,MySQL。以后再Linux上用的其他配置也会更新在这里。<br>]]>
    
    </summary>
    
      <category term="Linux" scheme="http://hounychang.github.io/tags/Linux/"/>
    
      <category term="Java" scheme="http://hounychang.github.io/tags/Java/"/>
    
      <category term="Linux" scheme="http://hounychang.github.io/categories/Linux/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Android Annotation 使用]]></title>
    <link href="http://hounychang.github.io/2014/09/24/Android-Annotation-%E4%BD%BF%E7%94%A8/"/>
    <id>http://hounychang.github.io/2014/09/24/Android-Annotation-使用/</id>
    <published>2014-09-24T10:26:52.000Z</published>
    <updated>2014-09-25T04:05:19.000Z</updated>
    <content type="html"><![CDATA[<p>这里将介绍大家怎么在Android Studio下使用著名的Android Annotation框架<br><a id="more"></a></p>
<h3 id="Android_Studio配置">Android Studio配置</h3>
<p> <strong>1.</strong>修改应用的<code>build.gradle</code>文件 <strong><em>注意是应用的不是整个项目的</em></strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.application'</span></div><div class="line"></div><div class="line"><span class="comment">//Copy Begin---从这里开始复制----</span></div><div class="line">apply plugin: <span class="string">'android-apt'</span><span class="comment">//添加使用apt插件</span></div><div class="line"><span class="keyword">def</span> AAVersion = <span class="string">'3.0.1'</span><span class="comment">//这里设置AA的版本号</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">buildscript</span> {</div><div class="line">    <span class="keyword">repositories</span> {</div><div class="line">        mavenCentral()</div><div class="line">    }</div><div class="line">    <span class="keyword">dependencies</span> {</div><div class="line">        <span class="comment">//这里设置gradle的版本</span></div><div class="line">        <span class="keyword">classpath</span> <span class="string">'com.android.tools.build:gradle:0.12.2'</span></div><div class="line">        <span class="comment">//这里设置apt的版本</span></div><div class="line">        <span class="keyword">classpath</span> <span class="string">'com.neenbedankt.gradle.plugins:android-apt:1.+'</span></div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">repositories</span> {</div><div class="line">    mavenCentral()</div><div class="line">    mavenLocal()</div><div class="line">}</div><div class="line"></div><div class="line">apt {</div><div class="line">    arguments {</div><div class="line">        androidManifestFile variant.processResources.manifestFile</div><div class="line">        resourcePackageName <span class="string">'com.houny.androidannotations'</span><span class="comment">//TODO 注意这里要设置当前项目的包名</span></div><div class="line"></div><div class="line"><span class="comment">//        logLevel 'ERROR'</span></div><div class="line"><span class="comment">//        logFile '/var/log/houny.log'</span></div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//Copy End---一直复制到这里，注意上面的TODO处的包名----</span></div><div class="line"></div><div class="line">android {</div><div class="line">    compileSdkVersion <span class="number">19</span></div><div class="line">    buildToolsVersion <span class="string">"19.1.0"</span></div><div class="line"></div><div class="line">    defaultConfig {</div><div class="line">        applicationId <span class="string">"com.houny.androidannotations"</span></div><div class="line">        minSdkVersion <span class="number">14</span></div><div class="line">        targetSdkVersion <span class="number">19</span></div><div class="line">        versionCode <span class="number">1</span></div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line">    }</div><div class="line">    buildTypes {</div><div class="line">        release {</div><div class="line">            runProguard <span class="keyword">false</span></div><div class="line">            proguardFiles getDefaultProguardFile(<span class="string">'proguard-android.txt'</span>), <span class="string">'proguard-rules.pro'</span></div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">dependencies</span> {</div><div class="line">    <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>: [<span class="string">'*.jar'</span>])</div><div class="line">    <span class="comment">//Copy Begin-------从这里开始复制--------------</span></div><div class="line">    apt <span class="string">"org.androidannotations:androidannotations:$AAVersion"</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">"org.androidannotations:androidannotations-api:$AAVersion"</span></div><div class="line">    <span class="comment">//Copy End--------一直复制到这里-------------</span></div><div class="line">}</div></pre></td></tr></table></figure>

<p><strong>2.</strong> 在<code>AndroidManifest.xml</code>中注册Activity的时候在最后加上<code>_</code>符号</p>
<blockquote>
<p>android:name=”.activity.MainActivity_”</p>
<p>可能会显示红色报错，只要点击<code>Build</code>—<code>Rebuild Project</code>就可以了</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<p>这里将介绍大家怎么在Android Studio下使用著名的Android Annotation框架<br>]]>
    
    </summary>
    
      <category term="Android" scheme="http://hounychang.github.io/tags/Android/"/>
    
      <category term="Annotation" scheme="http://hounychang.github.io/tags/Annotation/"/>
    
      <category term="Android" scheme="http://hounychang.github.io/categories/Android/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[My First Post]]></title>
    <link href="http://hounychang.github.io/2014/09/24/My-First-Post/"/>
    <id>http://hounychang.github.io/2014/09/24/My-First-Post/</id>
    <published>2014-09-24T07:56:19.000Z</published>
    <updated>2014-09-25T03:57:30.000Z</updated>
    <content type="html"><![CDATA[<p><code>Hello World</code><br><a id="more"></a><br>This is my first post.So,just <strong>Hello World</strong>.</p>
<h3 id="中文">中文</h3>
<p>今天学习了一下<a href="http://hexo.io" target="_blank" rel="external">Hexo</a>自己也在Github上弄了一个blog，也算是顺应潮流吧。</p>
<h3 id="The_End">The End</h3>
<blockquote>
<p>一切福田，不离方寸；从心而觅，感无不通。命由我作，福自己求。</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<p><code>Hello World</code><br>]]>
    
    </summary>
    
      <category term="Other" scheme="http://hounychang.github.io/tags/Other/"/>
    
      <category term="Me" scheme="http://hounychang.github.io/categories/Me/"/>
    
  </entry>
  
</feed>
